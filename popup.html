<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terse Settings</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Terse</h1>
    
    <div class="section">
      <button id="summarizeBtn" class="btn btn-primary" style="width: 100%; margin-bottom: 8px;">Summarize Page</button>
      <p class="help-text" style="text-align: center; margin-bottom: 0;">Or select text first, then click to summarize selection</p>
    </div>
    
    <div class="divider"></div>
    
    <div class="section">
      <label for="apiKey">OpenAI API Key</label>
      <div class="input-group">
        <input type="password" id="apiKey" placeholder="Enter your API key">
        <button id="toggleKey" class="toggle-btn" title="Show/Hide API key">üëÅ</button>
      </div>
      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" id="saveKey" checked>
          <span>Save for future use (persistent)</span>
        </label>
      </div>
      <div class="button-group">
        <button id="saveKeyBtn" class="btn btn-primary">Save API Key</button>
        <button id="removeKeyBtn" class="btn btn-secondary">Remove API Key</button>
      </div>
    </div>

    <div class="section">
      <label for="model">Model</label>
      <select id="model">
        <option value="gpt-5.2">gpt-5.2 (Latest - Best for coding & agentic tasks)</option>
        <option value="gpt-5.2-pro">gpt-5.2-pro (Smarter & more precise)</option>
        <option value="gpt-5-mini">gpt-5-mini (Fast & cost-efficient)</option>
        <option value="gpt-5-nano">gpt-5-nano (Fastest & most cost-efficient)</option>
        <option value="gpt-5">gpt-5 (Previous reasoning model)</option>
        <option value="gpt-4.1">gpt-4.1 (Smartest non-reasoning)</option>
        <option value="gpt-4.1-mini">gpt-4.1-mini (Smaller, faster GPT-4.1)</option>
        <option value="gpt-4.1-nano">gpt-4.1-nano (Fastest GPT-4.1)</option>
        <option value="gpt-4o">gpt-4o (Fast, intelligent, flexible)</option>
        <option value="gpt-4o-mini">gpt-4o-mini (Fast, affordable small model)</option>
        <option value="gpt-4-turbo">gpt-4-turbo (Older high-intelligence)</option>
        <option value="gpt-4">gpt-4 (Older high-intelligence)</option>
        <option value="gpt-3.5-turbo">gpt-3.5-turbo (Legacy - cheaper)</option>
      </select>
    </div>

    <div class="section">
      <label for="prompt">Prompt</label>
      <textarea id="prompt" rows="4" placeholder="Enter your custom prompt"></textarea>
      <div class="button-group">
        <button id="resetPrompt" class="btn btn-secondary">Reset to Default</button>
      </div>
      <p class="help-text">Default: "Extract the core message and most important takeaways from this text. What is the essential information the author wants the reader to know? Focus on the actual content and meaning, not a description of what the text is. Respond in 2-4 short sentences maximum - prioritize only the most critical points that a reader needs to understand."</p>
    </div>

    <div class="section">
      <button id="saveSettings" class="btn btn-primary">Save Settings</button>
    </div>

    <div class="divider"></div>

    <div class="section">
      <label>Usage & Costs</label>
      <div id="costSummary" class="cost-summary">
        <div class="cost-item">
          <span class="cost-label">Total Requests:</span>
          <span id="totalRequests" class="cost-value">0</span>
        </div>
        <div class="cost-item">
          <span class="cost-label">Total Cost:</span>
          <span id="totalCost" class="cost-value">$0.00</span>
        </div>
        <div class="cost-item">
          <span class="cost-label">Current Model Cost:</span>
          <span id="currentModelCost" class="cost-value">-</span>
        </div>
        <div class="cost-item">
          <span class="cost-label">Last Request Cost:</span>
          <span id="lastRequestCost" class="cost-value">-</span>
        </div>
        <details class="cost-details">
          <summary class="cost-summary-toggle">View by Model</summary>
          <div id="modelBreakdown" class="model-breakdown"></div>
        </details>
      </div>
    </div>

    <div id="status" class="status"></div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
